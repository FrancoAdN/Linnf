{"ast":null,"code":"var _jsxFileName = \"/Users/francodinapoli/Desktop/Linnf/Linnf-Client/src/components/chat/chatcontent/Chatcontent.js\";\nimport React, { useState } from 'react';\nimport '../chat.css';\nimport emoji from \"./emoticonos.svg\";\nimport { Query } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport Cookie from 'js-cookie';\nconst CHATCONTENT_QUERY = gql`\nquery Chat($from: Int, $to: Int){\n    conversation(from: $from, to:$to){\n      id_msg\n      to_id\n      from_id\n      date_time\n      message\n    }\n}\n`;\nexport default function Chatcontent({\n  conversation\n}) {\n  const user = parseInt(Cookie.get('user'));\n  let [chatmsg, setChat] = useState([]);\n  const [count, setCount] = useState(0);\n\n  const handleOnclick = () => {\n    // const msg = {\n    //     from_id: user,\n    //     to_id: conversation,\n    //     message: document.getElementById('msgin').value\n    // }\n    // //setChat(chatmsg.push(msg))\n    // let arr = chatmsg\n    // arr.push(msg)\n    // setChat(arr)\n\n    /*setChat(arr)\n    console.log(chatmsg == arr)*/\n    const msg = {\n      from_id: user,\n      to_id: conversation,\n      message: 'test'\n    };\n    setChat([...chatmsg, msg]);\n  };\n\n  const setContentChat = arr => {\n    setChat(arr);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 toprow\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mx-auto my-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 mainrow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content d-flex flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Query, {\n    query: CHATCONTENT_QUERY,\n    variables: {\n      from: user,\n      to: parseInt(conversation)\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, ({\n    loading,\n    error,\n    data\n  }) => {\n    if (loading) return /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 53\n      }\n    }, \"Loading..\");\n    if (error) console.log(error);\n    const {\n      conversation\n    } = data; //setContentChat(conversation)\n\n    return null;\n  }), chatmsg.slice(0).reverse().map((msg, i) => /*#__PURE__*/React.createElement(Message, {\n    key: i,\n    msg: msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"in-msg d-flex justify-content-around\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: emoji,\n    width: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"msgin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-primary\",\n    onClick: handleOnclick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, \"Send\")))));\n}\n\nfunction Message({\n  msg\n}) {\n  console.log(msg);\n  const user = parseInt(Cookie.get('user'));\n\n  if (user == msg.from_id) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: '15px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline float-right\",\n      style: {\n        background: '#9ddfe2',\n        padding: '10px',\n        paddingLeft: '20px',\n        paddingRight: '20px',\n        borderRadius: '30px',\n        maxWidth: '70%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, msg.message));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: '15px',\n        maxWidth: '70%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline\",\n      style: {\n        background: '#e3e3e3',\n        padding: '10px',\n        paddingLeft: '20px',\n        paddingRight: '20px',\n        borderRadius: '30px',\n        maxWidth: '70%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, msg.message));\n  }\n}","map":{"version":3,"sources":["/Users/francodinapoli/Desktop/Linnf/Linnf-Client/src/components/chat/chatcontent/Chatcontent.js"],"names":["React","useState","Query","gql","Cookie","CHATCONTENT_QUERY","Chatcontent","conversation","user","parseInt","get","chatmsg","setChat","count","setCount","handleOnclick","msg","from_id","to_id","message","setContentChat","arr","from","to","loading","error","data","console","log","slice","reverse","map","i","emoji","Message","margin","background","padding","paddingLeft","paddingRight","borderRadius","maxWidth"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport '../chat.css'\nimport emoji from './emoticonos.svg'\nimport { Query } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport Cookie from 'js-cookie'\n\nconst CHATCONTENT_QUERY = gql`\nquery Chat($from: Int, $to: Int){\n    conversation(from: $from, to:$to){\n      id_msg\n      to_id\n      from_id\n      date_time\n      message\n    }\n}\n`\n\n\nexport default function Chatcontent({conversation}) {\n    const user = parseInt(Cookie.get('user'))\n    let [chatmsg, setChat] = useState([])\n    constÂ [count, setCount] = useState(0)\n    const handleOnclick = () => {\n        // const msg = {\n        //     from_id: user,\n        //     to_id: conversation,\n        //     message: document.getElementById('msgin').value\n        // }\n        // //setChat(chatmsg.push(msg))\n        // let arr = chatmsg\n        // arr.push(msg)\n        // setChat(arr)\n\n        /*setChat(arr)\n        console.log(chatmsg == arr)*/\n        const msg = {\n            from_id: user,\n            to_id: conversation,\n            message: 'test'\n        }\n        setChat([...chatmsg, msg])\n\n    }\n\n    const setContentChat = (arr) => {\n        setChat(arr)\n    }\n    \n    return ( \n        <div className=\"row h-100\">\n            <div className=\"w-100 toprow\" align=\"center\">\n                <h4 className=\"mx-auto my-auto\"></h4>\n            </div>\n        \n            <div className=\"w-100 mainrow\">\n                <div className=\"content d-flex flex-column\">\n                    <Query query={CHATCONTENT_QUERY} variables={{ from: user, to: parseInt(conversation)}}>\n                        {\n                            ({loading, error, data}) => {\n                                if (loading) return <h4>Loading..</h4>\n                                if (error) console.log(error)\n                                const {conversation} = data\n                                //setContentChat(conversation)\n                                return null\n                            }\n                        }\n                    </Query>\n\n                    {\n                        chatmsg.slice(0).reverse().map((msg, i) => (\n                            <Message key={i} msg={msg}/>\n                        ))\n                        \n                    }\n                    {/* <h1>{count}</h1> */}\n                </div>\n                            \n                <div>\n                    <div className=\"in-msg d-flex justify-content-around\">\n                        <img src={emoji} width=\"20\"/>\n                        <input type=\"text\" id=\"msgin\"/>\n                        <span className=\"text-primary\" onClick={handleOnclick}>Send</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\nfunction Message({msg}){\n    \n    console.log(msg)\n    const user = parseInt(Cookie.get('user'))\n\n    if(user == msg.from_id){\n        return (<div style={{margin: '15px'}}>\n            <span  className=\"d-inline float-right\" style={{background: '#9ddfe2', padding: '10px', paddingLeft:'20px', paddingRight:'20px', borderRadius: '30px', maxWidth: '70%'}}>{msg.message}</span>\n        </div>)\n    } else {\n        return (<div style={{margin: '15px', maxWidth: '70%'}}>\n            <span  className=\"d-inline\" style={{background: '#e3e3e3', padding: '10px', paddingLeft:'20px', paddingRight:'20px', borderRadius: '30px' , maxWidth: '70%'}}>{msg.message}</span>\n        </div>)\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}