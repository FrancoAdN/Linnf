{"ast":null,"code":"var _jsxFileName = \"/Users/francodinapoli/Desktop/Linnf/Linnf-Client/src/components/chat/chatcontent/Chatcontent.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport '../chat.css';\nimport emoji from \"./emoticonos.svg\";\nimport { Query } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport Cookie from 'js-cookie';\nimport { SockContext } from '../../Store';\nimport { parse } from 'graphql';\nconst CHATCONTENT_QUERY = gql`\nquery Chat($from: Int, $to: Int){\n    conversation(from: $from, to:$to){\n      id_msg\n      to_id\n      from_id\n      date_time\n      message\n    }\n}\n`;\nexport default function Chatcontent({\n  conversation\n}) {\n  const user = parseInt(Cookie.get('user'));\n  const to = parseInt(conversation);\n  const {\n    connected,\n    setConnected,\n    Connect,\n    message,\n    setMessage,\n    change\n  } = useContext(SockContext);\n  console.log(message, setMessage);\n  useEffect(() => {\n    console.log(message);\n  }, [message]);\n\n  if (!connected) {\n    Connect(user);\n  }\n\n  return /*#__PURE__*/React.createElement(Query, {\n    query: CHATCONTENT_QUERY,\n    variables: {\n      from: user,\n      to\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, ({\n    loading,\n    error,\n    data\n  }) => {\n    if (loading) return /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 41\n      }\n    }, \"Loading..\");\n    if (error) console.log(error);\n    let content = data.conversation.reverse();\n    return /*#__PURE__*/React.createElement(MainContent, {\n      content: content,\n      user: user,\n      to: to,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 28\n      }\n    });\n  });\n}\n\nfunction Message({\n  msg\n}) {\n  const user = parseInt(Cookie.get('user'));\n\n  if (user == msg.from_id) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: '15px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline float-right\",\n      style: {\n        background: '#9ddfe2',\n        padding: '10px',\n        paddingLeft: '20px',\n        paddingRight: '20px',\n        borderRadius: '30px',\n        maxWidth: '70%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, msg.message));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: '15px',\n        maxWidth: '70%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline\",\n      style: {\n        background: '#e3e3e3',\n        padding: '10px',\n        paddingLeft: '20px',\n        paddingRight: '20px',\n        borderRadius: '30px',\n        maxWidth: '70%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, msg.message));\n  }\n}\n\nfunction MainContent({\n  content,\n  user,\n  to\n}) {\n  const [chatmsg, setChat] = useState([]);\n  useEffect(() => {\n    setChat(content);\n  }, [content]);\n\n  const handleOnclick = () => {\n    let msgin = document.getElementById('msgin').value;\n\n    if (msgin != '') {\n      const msg = {\n        from_id: user,\n        to_id: to,\n        message: msgin\n      };\n      setChat([...chatmsg, msg]);\n      document.getElementById('msgin').value = '';\n      let div = document.getElementById('content-div');\n      div.scrollTop = div.scrollHeight;\n    }\n  };\n\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') handleOnclick();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 toprow\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mx-auto my-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 mainrow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content d-flex flex-column overflow-auto\",\n    id: \"content-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, chatmsg.map((msg, i) => /*#__PURE__*/React.createElement(Message, {\n    key: i,\n    msg: msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"send-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"in-msg d-flex justify-content-around\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: emoji,\n    width: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"msgin\",\n    onKeyPress: handleKeyPress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-primary\",\n    onClick: handleOnclick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }, \"Send\")))));\n}","map":{"version":3,"sources":["/Users/francodinapoli/Desktop/Linnf/Linnf-Client/src/components/chat/chatcontent/Chatcontent.js"],"names":["React","useState","useEffect","useContext","Query","gql","Cookie","SockContext","parse","CHATCONTENT_QUERY","Chatcontent","conversation","user","parseInt","get","to","connected","setConnected","Connect","message","setMessage","change","console","log","from","loading","error","data","content","reverse","Message","msg","from_id","margin","background","padding","paddingLeft","paddingRight","borderRadius","maxWidth","MainContent","chatmsg","setChat","handleOnclick","msgin","document","getElementById","value","to_id","div","scrollTop","scrollHeight","handleKeyPress","e","key","map","i","emoji"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport '../chat.css'\nimport emoji from './emoticonos.svg'\nimport { Query } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport Cookie from 'js-cookie'\nimport {SockContext} from '../../Store'\nimport { parse } from 'graphql'\n\nconst CHATCONTENT_QUERY = gql`\nquery Chat($from: Int, $to: Int){\n    conversation(from: $from, to:$to){\n      id_msg\n      to_id\n      from_id\n      date_time\n      message\n    }\n}\n`\n\n\nexport default function Chatcontent({conversation}) {\n    const user = parseInt(Cookie.get('user'))\n    const to = parseInt(conversation)\n    const {connected, setConnected, Connect, message, setMessage, change} = useContext(SockContext)\n    console.log(message, setMessage)\n\n    \n    useEffect(() => {\n        console.log(message)\n    }, [message])\n\n    if (!connected) {\n        Connect(user)\n    }\n    \n\n    \n    return ( \n        <Query query={CHATCONTENT_QUERY} variables={{ from: user, to}}>\n            {\n                ({loading, error, data}) => {\n                    if (loading) return <h4>Loading..</h4>\n                    if (error) console.log(error)\n                    let content = data.conversation.reverse()\n                    return <MainContent content={content} user={user} to={to}/>\n                }\n            }\n        </Query>\n    )\n}\n\n\nfunction Message({msg}){\n\n    const user = parseInt(Cookie.get('user'))\n\n    if(user == msg.from_id){\n        return (<div style={{margin: '15px'}}>\n            <span  className=\"d-inline float-right\" style={{background: '#9ddfe2', padding: '10px', paddingLeft:'20px', paddingRight:'20px', borderRadius: '30px', maxWidth: '70%'}}>{msg.message}</span>\n        </div>)\n    } else {\n        return (<div style={{margin: '15px', maxWidth: '70%'}}>\n            <span  className=\"d-inline\" style={{background: '#e3e3e3', padding: '10px', paddingLeft:'20px', paddingRight:'20px', borderRadius: '30px' , maxWidth: '70%'}}>{msg.message}</span>\n        </div>)\n    }\n}\n\n\nfunction MainContent({content, user, to}) {\n\n    const [chatmsg, setChat] = useState([])\n    useEffect(() => {\n        setChat(content)\n    }, [content])\n\n    const handleOnclick = () => {\n        let msgin = document.getElementById('msgin').value\n\n        if (msgin != '') {\n            const msg = {\n                from_id: user,\n                to_id: to,\n                message: msgin\n            }\n    \n            setChat([...chatmsg, msg])\n    \n            document.getElementById('msgin').value = ''\n            let div = document.getElementById('content-div')\n            div.scrollTop = div.scrollHeight\n            \n        }\n\n    }\n    const handleKeyPress = (e) => {\n        \n        if(e.key === 'Enter')\n            handleOnclick()\n    }\n\n    return (\n        <div className=\"row h-100\">\n            <div className=\"w-100 toprow\" align=\"center\">\n                <h4 className=\"mx-auto my-auto\"></h4>\n            </div>\n        \n            <div className=\"w-100 mainrow\">\n                <div className=\"content d-flex flex-column overflow-auto\" id=\"content-div\">\n                    \n                    {\n                        chatmsg.map((msg, i) => (\n                            <Message key={i} msg={msg}/>\n                        ))\n                        \n                    }\n\n                </div>\n                            \n                <div className=\"send-div\">\n                    <div className=\"in-msg d-flex justify-content-around\">\n                        <img src={emoji} width=\"20\"/>\n                        <input type=\"text\" id=\"msgin\" onKeyPress={handleKeyPress}/>\n                        <span className=\"text-primary\" onClick={handleOnclick}>Send</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}